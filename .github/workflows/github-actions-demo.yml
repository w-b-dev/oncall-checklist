name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    permissions:
      actions: write
      checks: write
      contents: write
      deployments: write
      issues: write
      packages: write
      pull-requests: write
      repository-projects: write
      security-events: write
      statuses: write
    steps:
      - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
#      --------------
      - name: Check out repository code
        uses: actions/checkout@v2
      - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
      - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
        #      --------------
      - name: Set GIT credentials
        run: |
          git config --global user.name "w-b-dev"
          git config --global user.email "iam@w-b.dev"
        #      --------------
      - name: Setup Node
        uses: actions/setup-node@v2
        with:
          node-version: '14'
          cache: 'npm'
        #      --------------
      - name: Install packages
        run: npm ci
        #      --------------
#      - name: Configure GIT remote
#        run: |
#          git config remote.origin.url 'https://github.com/w-b-dev/oncall-checklist.git'
#          git config remote.origin.url 'https://${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}'
        #      --------------
      - name: Deploy
        run: npm run deploy
        #      --------------
      - name: List files in the repository
        run: |
         ls ${{ github.workspace }}
